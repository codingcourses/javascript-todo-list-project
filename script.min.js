class Model{constructor(){this.items=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[]}addItem(t){this.items.push(t),this.onChange(this.items)}deleteItem(t){const e=this.items.findIndex(e=>e.id===t);-1!==e&&(this.items.splice(e,1),this.onChange(this.items))}toggleItem(t){const e=this.items.findIndex(e=>e.id===t);-1!==e&&(this.items[e].completed=!this.items[e].completed,this.onChange(this.items))}saveItems(){localStorage.setItem("todos",JSON.stringify(this.items))}bindOnChange(t){this.onChange=t}}class View{constructor(){this.textInput=this.getElement("#text-input"),this.addButton=this.getElement("#add-button"),this.itemsList=this.getElement("#items-list"),this.emptyState=this.getElement("#empty-state")}getElement(t){return document.querySelector(t)}bindAddItem(t){this.addButton.addEventListener("click",e=>{this.textInput.value&&(t(this.textInput.value),this.textInput.value="")})}bindOnDelete(t){this.onDelete=t}bindOnToggle(t){this.onToggle=t}updateItemsList(t){if(!t.length)return this.itemsList.style.display="none",void(this.emptyState.style.display="block");this.itemsList.innerHTML="",this.itemsList.style.display="block",this.emptyState.style.display="none";for(const e of t){const t=document.createElement("li");t.setAttribute("class","uk-card uk-card-default uk-card-body uk-card-small uk-flex");const i=document.createElement("div");i.setAttribute("class","uk-margin-small-right");const s=document.createElement("input");s.setAttribute("class","uk-checkbox"),s.setAttribute("type","checkbox"),s.addEventListener("click",t=>{this.onToggle&&this.onToggle(e.id)});const n=document.createElement("div");n.setAttribute("class","uk-width-expand"),n.textContent=e.text,e.completed&&(n.style.textDecoration="line-through");const o=document.createElement("div"),d=document.createElement("a");d.setAttribute("uk-icon","trash"),d.addEventListener("click",t=>{this.onDelete&&this.onDelete(e.id)}),i.appendChild(s),o.appendChild(d),t.appendChild(i),t.appendChild(n),t.appendChild(o),this.itemsList.appendChild(t)}}}class Controller{constructor(t,e){this.model=t,this.view=e,this.model.bindOnChange(this.onChange),this.view.bindAddItem(this.onAddItem),this.view.bindOnDelete(this.onDeleteItem),this.view.bindOnToggle(this.onToggleItem),this.onChange(this.model.items)}onChange=t=>{this.view.updateItemsList(t),this.model.saveItems()};onAddItem=t=>{this.model.addItem({id:generateID(),completed:!1,text:t})};onDeleteItem=t=>{this.model.deleteItem(t)};onToggleItem=t=>{this.model.toggleItem(t)}}const app=new Controller(new Model,new View);function generateID(){return Math.random().toString(36).substr(2,9)}
